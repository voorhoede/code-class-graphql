{"version":3,"sources":["node_modules/bespoke/lib/bespoke.js","node_modules/bespoke-keys/lib/bespoke-keys.js","node_modules/bespoke-vcr/lib/bespoke-vcr.js","main.js"],"names":["from","opts","plugins","parent","nodeType","document","querySelector","slides","filter","call","querySelectorAll","children","el","nodeName","activeSlide","listeners","activate","index","customData","createEventData","step","offset","slideIndex","indexOf","off","eventName","callback","listener","fire","eventData","reduce","notCancelled","slide","deck","on","push","bind","arguments","length","forEach","plugin","module","exports","options","isHorizontal","addEventListener","e","which","shiftKey","next","prev","getRecordings","recordings","localStorage","JSON","parse","getLatestRecording","undefined","save","stringify","clear","vcr","reporter","recordStartTime","indicator","frames","recording","report","reporters","isRecording","status","createElement","style","width","height","borderRadius","position","left","bottom","backgroundColor","body","appendChild","stop","Date","getTime","command","frame","remote","R","record","S","P","play","red","green","apply","timeout","title","data","log","latest","console","all","bespoke","require","bespokeKeys","bespokeVcr","createTimeline","timeouts","timeline","toMilliseconds","minutes","window","event","key","preventDefault","scrollIntoView"],"mappings":"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","file":"main.26f5c4da.map","sourceRoot":"..","sourcesContent":["var from = function(opts, plugins) {\n  var parent = (opts.parent || opts).nodeType === 1 ? (opts.parent || opts) : document.querySelector(opts.parent || opts),\n    slides = [].filter.call(typeof opts.slides === 'string' ? parent.querySelectorAll(opts.slides) : (opts.slides || parent.children), function(el) { return el.nodeName !== 'SCRIPT'; }),\n    activeSlide = slides[0],\n    listeners = {},\n\n    activate = function(index, customData) {\n      if (!slides[index]) {\n        return;\n      }\n\n      fire('deactivate', createEventData(activeSlide, customData));\n      activeSlide = slides[index];\n      fire('activate', createEventData(activeSlide, customData));\n    },\n\n    slide = function(index, customData) {\n      if (arguments.length) {\n        fire('slide', createEventData(slides[index], customData)) && activate(index, customData);\n      } else {\n        return slides.indexOf(activeSlide);\n      }\n    },\n\n    step = function(offset, customData) {\n      var slideIndex = slides.indexOf(activeSlide) + offset;\n\n      fire(offset > 0 ? 'next' : 'prev', createEventData(activeSlide, customData)) && activate(slideIndex, customData);\n    },\n\n    on = function(eventName, callback) {\n      (listeners[eventName] || (listeners[eventName] = [])).push(callback);\n      return off.bind(null, eventName, callback);\n    },\n\n    off = function(eventName, callback) {\n      listeners[eventName] = (listeners[eventName] || []).filter(function(listener) { return listener !== callback; });\n    },\n\n    fire = function(eventName, eventData) {\n      return (listeners[eventName] || [])\n        .reduce(function(notCancelled, callback) {\n          return notCancelled && callback(eventData) !== false;\n        }, true);\n    },\n\n    createEventData = function(el, eventData) {\n      eventData = eventData || {};\n      eventData.index = slides.indexOf(el);\n      eventData.slide = el;\n      return eventData;\n    },\n\n    deck = {\n      on: on,\n      off: off,\n      fire: fire,\n      slide: slide,\n      next: step.bind(null, 1),\n      prev: step.bind(null, -1),\n      parent: parent,\n      slides: slides\n    };\n\n  (plugins || []).forEach(function(plugin) {\n    plugin(deck);\n  });\n\n  activate(0);\n\n  return deck;\n};\n\nmodule.exports = {\n  from: from\n};\n","module.exports = function(options) {\n  return function(deck) {\n    var isHorizontal = options !== 'vertical';\n\n    document.addEventListener('keydown', function(e) {\n      if (e.which == 34 || // PAGE DOWN\n        (e.which == 32 && !e.shiftKey) || // SPACE WITHOUT SHIFT\n        (isHorizontal && e.which == 39) || // RIGHT\n        (!isHorizontal && e.which == 40) // DOWN\n      ) { deck.next(); }\n\n      if (e.which == 33 || // PAGE UP\n        (e.which == 32 && e.shiftKey) || // SPACE + SHIFT\n        (isHorizontal && e.which == 37) || // LEFT\n        (!isHorizontal && e.which == 38) // UP\n      ) { deck.prev(); }\n    });\n  };\n};\n","var getRecordings = function() {\n    var recordings = localStorage['bespoke-vcr'];\n    return recordings ? JSON.parse(recordings) : [];\n  },\n\n  getLatestRecording = function() {\n    var recordings = getRecordings();\n    return recordings.length ? recordings[recordings.length - 1] : undefined;\n  },\n\n  save = function(recordings) {\n    localStorage['bespoke-vcr'] = JSON.stringify(recordings);\n  },\n\n  clear = function() {\n    delete localStorage['bespoke-vcr'];\n  };\n\nvar vcr = function(options) {\n  return function(deck) {\n    options = options || {};\n    options.reporter = options.reporter || 'console';\n\n    var recordings = getRecordings() || [],\n      frames = options.recording || getLatestRecording(),\n      report = typeof options.reporter === 'string' ? vcr.reporters[options.reporter] : options.reporter,\n      recordStartTime,\n      isRecording = false,\n      isPlaying = false;\n\n    var status = (function() {\n      var indicator = document.createElement('div'),\n        size = '8px';\n\n      indicator.style.width = size;\n      indicator.style.height = size;\n      indicator.style.borderRadius = size;\n      indicator.style.position = 'absolute';\n      indicator.style.left = '4px';\n      indicator.style.bottom = '4px';\n      indicator.style.backgroundColor = 'transparent';\n      document.body.appendChild(indicator);\n\n      return {\n        red: function() {\n          indicator.style.backgroundColor = 'red';\n        },\n        green: function() {\n          indicator.style.backgroundColor = 'green';\n        },\n        clear: function() {\n          indicator.style.backgroundColor = 'transparent';\n        }\n      };\n    }());\n\n    var record = function() {\n      if (isRecording) {\n        return stop();\n      }\n\n      deck.slide(0);\n\n      isRecording = true;\n      isPlaying = false;\n      status.red();\n\n      report('Recording to local storage...');\n      recordStartTime = new Date().getTime();\n\n      frames = [];\n      recordings.push(frames);\n    };\n\n    var play = function() {\n      if (isRecording) {\n        stop();\n      }\n\n      if (frames.length === 0) {\n        return;\n      }\n\n      isPlaying = true;\n      status.green();\n\n      report('Playing the following recording:', frames);\n\n      deck.slide(0);\n      frames.forEach(function(frame) {\n        setTimeout(function() {\n          if (frame.command) {\n            deck[frame.command].apply(null, frame.arguments || []);\n          } else {\n            report('Playback complete');\n            isPlaying = false;\n            status.clear();\n          }\n        }, frame.timeout);\n      });\n    };\n\n    var stop = function() {\n      if (isRecording) {\n        frames.push({\n          timeout: new Date().getTime() - recordStartTime\n        });\n        save(recordings);\n        report('Successfully recorded the following to local storage:', frames);\n      }\n\n      isRecording = false;\n      isPlaying = false;\n      status.clear();\n    };\n\n    ['next', 'prev', 'slide'].forEach(function(command) {\n      deck.on(command, function(e) {\n        var frame = {\n          command: command,\n          timeout: new Date().getTime() - recordStartTime\n        };\n\n        if (command === 'slide') {\n          frame.arguments = [e.index];\n        }\n\n        if (isRecording) {\n          frames.push(frame);\n          save(recordings);\n        }\n      });\n    });\n\n    var setupRemote = options.remote || function(remote) {\n        window.addEventListener('keydown', function(e) {\n          var P = 80,\n            R = 82,\n            S = 83;\n\n          switch (e.which) {\n            case R:\n              remote.record();\n              break;\n            case S:\n              remote.stop();\n              break;\n            case P:\n              remote.play();\n              break;\n          }\n        });\n      },\n\n      controls = {\n        record: record,\n        play: play,\n        stop: stop\n      };\n\n    setupRemote(controls);\n  };\n};\n\nvcr.reporters = {\n  console: function(title, data) {\n    console.log(\n      'BESPOKE-VCR: ' + title + '\\n' +\n      (data ? JSON.stringify(data, null, 2) + '\\n' : '')\n    );\n  }\n};\n\nvcr.latest = function() {\n  vcr.reporters.console('Latest recording:', getLatestRecording());\n};\n\nvcr.all = function() {\n  vcr.reporters.console('All recordings:', getRecordings());\n};\n\nvcr.clear = clear;\n\nmodule.exports = vcr;\n","const bespoke = require('bespoke');\nconst bespokeKeys = require('bespoke-keys');\nconst bespokeVcr = require('bespoke-vcr');\n\nwindow.addEventListener('keydown', event => {\n  if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {\n    event.preventDefault();\n  }\n});\n\nbespoke\n  .from('body', [\n    bespokeKeys('vertical'),\n    bespokeVcr({\n      recording: createTimeline([0.75, 1, 1, 4, 5, 2, 4, 5, 25, 5]),\n    }),\n  ])\n  .on('activate', ({ slide }) => {\n    slide.scrollIntoView({\n      behavior: 'smooth',\n      block: 'center',\n      inline: 'nearest',\n    });\n\n    return false;\n  });\n\nfunction createTimeline(timeouts) {\n  return timeouts.reduce(\n    (timeline, timeout, index) => [\n      ...timeline,\n      {\n        command: 'slide',\n        arguments: [index + 1],\n        timeout:\n          timeline[timeline.length - 1].timeout + toMilliseconds(timeout),\n      },\n    ],\n    [{ timeout: 0 }]\n  );\n}\n\nfunction toMilliseconds(minutes) {\n  return minutes * 60 * 1000;\n}\n"]}