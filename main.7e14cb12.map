{"version":3,"sources":["node_modules/bespoke/lib/bespoke.js","node_modules/bespoke-keys/lib/bespoke-keys.js","node_modules/bespoke-vcr/lib/bespoke-vcr.js","main.js"],"names":["from","opts","plugins","parent","nodeType","document","querySelector","slides","filter","call","querySelectorAll","children","el","nodeName","activeSlide","listeners","activate","index","customData","fire","createEventData","step","offset","slideIndex","indexOf","off","eventName","callback","listener","eventData","reduce","notCancelled","slide","deck","on","push","bind","arguments","length","next","prev","forEach","plugin","module","exports","options","isHorizontal","addEventListener","e","which","shiftKey","getRecordings","recordings","localStorage","JSON","parse","getLatestRecording","undefined","save","stringify","clear","vcr","reporter","recordStartTime","indicator","frames","recording","report","reporters","isRecording","status","createElement","style","width","height","borderRadius","position","left","bottom","backgroundColor","body","appendChild","red","green","stop","timeout","Date","getTime","command","frame","remote","window","R","record","S","P","play","setTimeout","apply","console","title","data","log","latest","all","bespoke","require","bespokeKeys","bespokeVcr","createTimeline","timeouts","timeline","toMilliseconds","minutes","event","key","preventDefault","scrollIntoView","behavior","block","inline"],"mappings":"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","file":"main.7e14cb12.map","sourceRoot":"..","sourcesContent":["var from = function(opts, plugins) {\n  var parent = (opts.parent || opts).nodeType === 1 ? (opts.parent || opts) : document.querySelector(opts.parent || opts),\n    slides = [].filter.call(typeof opts.slides === 'string' ? parent.querySelectorAll(opts.slides) : (opts.slides || parent.children), function(el) { return el.nodeName !== 'SCRIPT'; }),\n    activeSlide = slides[0],\n    listeners = {},\n\n    activate = function(index, customData) {\n      if (!slides[index]) {\n        return;\n      }\n\n      fire('deactivate', createEventData(activeSlide, customData));\n      activeSlide = slides[index];\n      fire('activate', createEventData(activeSlide, customData));\n    },\n\n    slide = function(index, customData) {\n      if (arguments.length) {\n        fire('slide', createEventData(slides[index], customData)) && activate(index, customData);\n      } else {\n        return slides.indexOf(activeSlide);\n      }\n    },\n\n    step = function(offset, customData) {\n      var slideIndex = slides.indexOf(activeSlide) + offset;\n\n      fire(offset > 0 ? 'next' : 'prev', createEventData(activeSlide, customData)) && activate(slideIndex, customData);\n    },\n\n    on = function(eventName, callback) {\n      (listeners[eventName] || (listeners[eventName] = [])).push(callback);\n      return off.bind(null, eventName, callback);\n    },\n\n    off = function(eventName, callback) {\n      listeners[eventName] = (listeners[eventName] || []).filter(function(listener) { return listener !== callback; });\n    },\n\n    fire = function(eventName, eventData) {\n      return (listeners[eventName] || [])\n        .reduce(function(notCancelled, callback) {\n          return notCancelled && callback(eventData) !== false;\n        }, true);\n    },\n\n    createEventData = function(el, eventData) {\n      eventData = eventData || {};\n      eventData.index = slides.indexOf(el);\n      eventData.slide = el;\n      return eventData;\n    },\n\n    deck = {\n      on: on,\n      off: off,\n      fire: fire,\n      slide: slide,\n      next: step.bind(null, 1),\n      prev: step.bind(null, -1),\n      parent: parent,\n      slides: slides\n    };\n\n  (plugins || []).forEach(function(plugin) {\n    plugin(deck);\n  });\n\n  activate(0);\n\n  return deck;\n};\n\nmodule.exports = {\n  from: from\n};\n","module.exports = function(options) {\n  return function(deck) {\n    var isHorizontal = options !== 'vertical';\n\n    document.addEventListener('keydown', function(e) {\n      if (e.which == 34 || // PAGE DOWN\n        (e.which == 32 && !e.shiftKey) || // SPACE WITHOUT SHIFT\n        (isHorizontal && e.which == 39) || // RIGHT\n        (!isHorizontal && e.which == 40) // DOWN\n      ) { deck.next(); }\n\n      if (e.which == 33 || // PAGE UP\n        (e.which == 32 && e.shiftKey) || // SPACE + SHIFT\n        (isHorizontal && e.which == 37) || // LEFT\n        (!isHorizontal && e.which == 38) // UP\n      ) { deck.prev(); }\n    });\n  };\n};\n","var getRecordings = function() {\n    var recordings = localStorage['bespoke-vcr'];\n    return recordings ? JSON.parse(recordings) : [];\n  },\n\n  getLatestRecording = function() {\n    var recordings = getRecordings();\n    return recordings.length ? recordings[recordings.length - 1] : undefined;\n  },\n\n  save = function(recordings) {\n    localStorage['bespoke-vcr'] = JSON.stringify(recordings);\n  },\n\n  clear = function() {\n    delete localStorage['bespoke-vcr'];\n  };\n\nvar vcr = function(options) {\n  return function(deck) {\n    options = options || {};\n    options.reporter = options.reporter || 'console';\n\n    var recordings = getRecordings() || [],\n      frames = options.recording || getLatestRecording(),\n      report = typeof options.reporter === 'string' ? vcr.reporters[options.reporter] : options.reporter,\n      recordStartTime,\n      isRecording = false,\n      isPlaying = false;\n\n    var status = (function() {\n      var indicator = document.createElement('div'),\n        size = '8px';\n\n      indicator.style.width = size;\n      indicator.style.height = size;\n      indicator.style.borderRadius = size;\n      indicator.style.position = 'absolute';\n      indicator.style.left = '4px';\n      indicator.style.bottom = '4px';\n      indicator.style.backgroundColor = 'transparent';\n      document.body.appendChild(indicator);\n\n      return {\n        red: function() {\n          indicator.style.backgroundColor = 'red';\n        },\n        green: function() {\n          indicator.style.backgroundColor = 'green';\n        },\n        clear: function() {\n          indicator.style.backgroundColor = 'transparent';\n        }\n      };\n    }());\n\n    var record = function() {\n      if (isRecording) {\n        return stop();\n      }\n\n      deck.slide(0);\n\n      isRecording = true;\n      isPlaying = false;\n      status.red();\n\n      report('Recording to local storage...');\n      recordStartTime = new Date().getTime();\n\n      frames = [];\n      recordings.push(frames);\n    };\n\n    var play = function() {\n      if (isRecording) {\n        stop();\n      }\n\n      if (frames.length === 0) {\n        return;\n      }\n\n      isPlaying = true;\n      status.green();\n\n      report('Playing the following recording:', frames);\n\n      deck.slide(0);\n      frames.forEach(function(frame) {\n        setTimeout(function() {\n          if (frame.command) {\n            deck[frame.command].apply(null, frame.arguments || []);\n          } else {\n            report('Playback complete');\n            isPlaying = false;\n            status.clear();\n          }\n        }, frame.timeout);\n      });\n    };\n\n    var stop = function() {\n      if (isRecording) {\n        frames.push({\n          timeout: new Date().getTime() - recordStartTime\n        });\n        save(recordings);\n        report('Successfully recorded the following to local storage:', frames);\n      }\n\n      isRecording = false;\n      isPlaying = false;\n      status.clear();\n    };\n\n    ['next', 'prev', 'slide'].forEach(function(command) {\n      deck.on(command, function(e) {\n        var frame = {\n          command: command,\n          timeout: new Date().getTime() - recordStartTime\n        };\n\n        if (command === 'slide') {\n          frame.arguments = [e.index];\n        }\n\n        if (isRecording) {\n          frames.push(frame);\n          save(recordings);\n        }\n      });\n    });\n\n    var setupRemote = options.remote || function(remote) {\n        window.addEventListener('keydown', function(e) {\n          var P = 80,\n            R = 82,\n            S = 83;\n\n          switch (e.which) {\n            case R:\n              remote.record();\n              break;\n            case S:\n              remote.stop();\n              break;\n            case P:\n              remote.play();\n              break;\n          }\n        });\n      },\n\n      controls = {\n        record: record,\n        play: play,\n        stop: stop\n      };\n\n    setupRemote(controls);\n  };\n};\n\nvcr.reporters = {\n  console: function(title, data) {\n    console.log(\n      'BESPOKE-VCR: ' + title + '\\n' +\n      (data ? JSON.stringify(data, null, 2) + '\\n' : '')\n    );\n  }\n};\n\nvcr.latest = function() {\n  vcr.reporters.console('Latest recording:', getLatestRecording());\n};\n\nvcr.all = function() {\n  vcr.reporters.console('All recordings:', getRecordings());\n};\n\nvcr.clear = clear;\n\nmodule.exports = vcr;\n","const bespoke = require('bespoke');\nconst bespokeKeys = require('bespoke-keys');\nconst bespokeVcr = require('bespoke-vcr');\n\nwindow.addEventListener('keydown', event => {\n  if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {\n    event.preventDefault();\n  }\n});\n\nbespoke\n  .from('body', [\n    bespokeKeys('vertical'),\n    bespokeVcr({\n      recording: createTimeline([0.75, 1, 1, 4, 5, 2, 4, 5, 25, 5]),\n    }),\n  ])\n  .on('activate', ({ slide }) => {\n    slide.scrollIntoView({\n      behavior: 'smooth',\n      block: 'center',\n      inline: 'nearest',\n    });\n\n    return false;\n  });\n\nfunction createTimeline(timeouts) {\n  return timeouts.reduce(\n    (timeline, timeout, index) => [\n      ...timeline,\n      {\n        command: 'slide',\n        arguments: [index + 1],\n        timeout:\n          timeline[timeline.length - 1].timeout + toMilliseconds(timeout),\n      },\n    ],\n    [{ timeout: 0 }]\n  );\n}\n\nfunction toMilliseconds(minutes) {\n  return minutes * 60 * 1000;\n}\n"]}